<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kotlin|从入门到放弃</title>
  <subtitle>Kotlin就是爽</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://kotlin.xin/"/>
  <updated>2017-05-24T16:29:19.000Z</updated>
  <id>http://kotlin.xin/</id>
  
  <author>
    <name>ahong222</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>开发Android：提升Android开发效率</title>
    <link href="http://kotlin.xin/2017/05/25/%E5%BC%80%E5%8F%91Android%EF%BC%9A%E6%8F%90%E5%8D%87Android%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87/"/>
    <id>http://kotlin.xin/2017/05/25/开发Android：提升Android开发效率/</id>
    <published>2017-05-24T16:28:49.000Z</published>
    <updated>2017-05-24T16:29:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>####1.去掉findViewById<br>只需要在App Module的build.gradle 中添加<br>apply plugin: ‘kotlin-android-extensions’//手动添加<br>代码然后就可以这样写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">    super.onCreate(savedInstanceState)</div><div class="line">    setContentView(R.layout.activity_kotlin)</div><div class="line">    //直接使用activity_kotlin.xml中的id</div><div class="line">    test.setOnClickListener &#123; view-&gt; onClickTest(view) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>inflate生成的View，也可以直接操作xml中id<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">fun onClickTest(view: View):String?&#123;</div><div class="line">    var view:View   = LayoutInflater.from(this).inflate(R.layout.dialog_kotlin,null, false);</div><div class="line">    val text:String = &quot;clicked this is dialog!&quot;;</div><div class="line">    message = text;</div><div class="line">    view.message.setText(message);</div><div class="line">    var dialog: AlertDialog = AlertDialog.Builder(this).setView(view).setPositiveButton(&quot;this&quot;, DialogInterface.OnClickListener &#123; dialog, which -&gt;  onClickDialog(dialog, which, text)&#125;).create();</div><div class="line">    dialog.show();</div><div class="line"></div><div class="line">    return null;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>####2.空安全</p>
<p>######i. 变量或参数可空用 ？标记<br>不可空类型如果设置为空会提示错误<br><img src="http://upload-images.jianshu.io/upload_images/2858322-d009e89ada101923.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-04 下午4.15.29.png"></p>
<p>######ii.安全调用<br>调用可空参数时未加？会提示不安全，？表示非空就返回后面的内容，为空就返回null<br><img src="http://upload-images.jianshu.io/upload_images/2858322-3e58a709f5cd84d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-04 下午4.23.52.png"></p>
<p>######iii. ?: 表达式<br>表达式左边为非空，为空时‘执行’表达式右边，如右边包含return ，throw Exception等也可以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var object1: StaticInnerClass? = null;</div><div class="line">var length3: String = object1?.getNewName() ?: throw RuntimeException(&quot;test&quot;);</div></pre></td></tr></table></figure></p>
<p>######iiii. !! 非空强制转换符</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2858322-d722e60054a23d96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-04 下午4.49.47.png"></p>
<p>####3.函数扩展<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//扩展Context类，增加toast方法</div><div class="line">fun Context.toast(message: String, time: Int) &#123;</div><div class="line">    Toast.makeText(this, message, time).show();</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun onClickTest(view: View):String?&#123;</div><div class="line">    var context: Context = this;</div><div class="line">    context.toast(&quot;toast text&quot;,Toast.LENGTH_SHORT);//调用扩展方法</div><div class="line">    return null;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在外部扩展，供整个项目使用。新建Kotlin文件，内容如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">package com.ifnoif.androidtestdemo.kotlin</div><div class="line"></div><div class="line">import android.content.Context</div><div class="line">import android.widget.Toast</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by shen on 17/4/4.</div><div class="line"> */</div><div class="line"></div><div class="line"></div><div class="line">fun Context.toast(message: String, time: Int) &#123;</div><div class="line">    Toast.makeText(this, message, time).show();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>####4.数据类(data class，巨幅 减少代码)<br>data class会自动根据构造函数实现equals()/hashCode，toString，还会增加copy方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">data class Car(var name:String,var color:String, var weight:Int)&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun testCar()&#123;</div><div class="line">    var car:Car = Car(&quot;bus&quot;,&quot;red&quot;,1000);</div><div class="line">    var color = car.color;</div><div class="line">    var name = car.name;</div><div class="line">    var weight = car.weight;</div><div class="line">    var newCar:Car =car.copy(name=&quot;bicycle&quot;,weight = 10);</div><div class="line">    var equalsResult =car.equals(newCar);</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>####5. lambda 表达式,减少匿名内部类<br>看看setOnClickListener怎么写的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">    super.onCreate(savedInstanceState)</div><div class="line">    setContentView(R.layout.activity_kotlin)</div><div class="line"></div><div class="line">    test.setOnClickListener &#123; view-&gt; onClickTest(view) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>更多Lambda用法参考：<a href="http://www.jianshu.com/p/357e23343858" target="_blank" rel="external">函数式编程之Lambda表达式</a></p>
<p>####6.Anko 库，可以让您编写描述性的布局，而无需使用XML<br>如在activity中显示一个垂直布局<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">    super.onCreate(savedInstanceState) ｛</div><div class="line">        verticalLayout &#123;</div><div class="line">            val name = editText()</div><div class="line">            button(&quot;Say Hello&quot;) &#123;</div><div class="line">                onClick &#123; toast(&quot;Hello, $&#123;name.text&#125;!&quot;) &#125;</div><div class="line">            &#125;</div><div class="line">        ｝</div><div class="line">    &#125;</div><div class="line">｝</div></pre></td></tr></table></figure></p>
<p>需要配置插件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    compile &apos;org.jetbrains.anko:anko-sdk15:0.7.1&apos; // sdk19, sdk21, sdk23 are also available</div><div class="line">    compile &apos;org.jetbrains.anko:anko-support-v4:0.7.1&apos; // In case you need support.v4 bindings</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>更多Anko相关：<a href="https://github.com/Kotlin/anko" target="_blank" rel="external">https://github.com/Kotlin/anko</a></p>
<p>##7.其他特性</p>
<p>###Smart Casts（智能类型转换）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">if (obj is String) &#123;</div><div class="line">    //判断通过后就能使用该类型的API</div><div class="line">    print(obj.length)</div><div class="line">&#125;</div><div class="line"></div><div class="line">//安全的类型转换，类型不匹配则x为null</div><div class="line">var y: Any = 123</div><div class="line">val x: String? = y as? String</div><div class="line">println(&quot;x:&quot;+x+&quot; y:&quot;+y)//输出x:123 y:null</div></pre></td></tr></table></figure></p>
<p>###String Templates(字符串模板)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//更容易阅读</div><div class="line">val s = &quot;abc&quot;</div><div class="line">val str = &quot;$s.length is $&#123;s.length&#125;&quot; // 结果&quot;abc.length is 3&quot;</div></pre></td></tr></table></figure></p>
<p>###代理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//接口中包含具体的方法,类似java8中Default 方法</div><div class="line">interface Operation &#123;</div><div class="line">    fun add(a: Int, b: Int): Int;</div><div class="line">    fun print()&#123;</div><div class="line">        println(&quot;Operation&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###Range expressions(范围表达式)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for (i in 1..4) print(i) // prints &quot;1234&quot;</div><div class="line">for (i in 4..1) print(i) // prints nothing</div><div class="line">for (i in 4 downTo 1) print(i) // prints &quot;4321&quot;</div><div class="line">for (i in 1..4 step 2) print(i) // prints &quot;13&quot;</div><div class="line">for (i in 4 downTo 1 step 2) print(i) // prints &quot;42&quot;</div></pre></td></tr></table></figure></p>
<p>###具体方法重写成抽象方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">open class Base &#123;</div><div class="line">    open fun f() &#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">abstract class Derived : Base() &#123;</div><div class="line">    override abstract fun f()</div><div class="line">&#125;</div><div class="line"></div><div class="line">class SubDerived:Derived() &#123;</div><div class="line">    override fun f() &#123;</div><div class="line">        TODO(&quot;not implemented&quot;) //To change body of created functions use File | Settings | File Templates.</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>##8.不支持的</p>
<p>###异常检查<br>抛出异常后不会让你强制捕获异常。kotlin也支持在方法上抛出异常@Throws(Exception::class)<br>如果java调用该方法需要强制处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//kotlin调用java中有异常的方法</div><div class="line">var fileOutputStream:FileOutputStream = FileOutputStream(&quot;/out.txt&quot;)</div><div class="line">var byteArr:ByteArray = ByteArray(1024)</div><div class="line">fileOutputStream.write(byteArr)</div><div class="line">//kotlin定义一个会抛出异常的方法</div><div class="line">companion object &#123;</div><div class="line">        @Throws(Exception::class)</div><div class="line">        fun testGson() &#123;companion object &#123;</div><div class="line">        @Throws(Exception::class)</div><div class="line">        fun testGson() &#123;</div><div class="line">        ｝</div><div class="line">｝</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//java中调用kotlin中方法</div><div class="line">public void testInvokeKotlin() &#123;</div><div class="line">        try &#123;</div><div class="line">            GsonTest.Companion.testGson();</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>更多与java比较<br><a href="https://kotlinlang.org/docs/reference/comparison-to-java.html" target="_blank" rel="external">https://kotlinlang.org/docs/reference/comparison-to-java.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;####1.去掉findViewById&lt;br&gt;只需要在App Module的build.gradle 中添加&lt;br&gt;apply plugin: ‘kotlin-android-extensions’//手动添加&lt;br&gt;代码然后就可以这样写&lt;br&gt;&lt;figure class
    
    </summary>
    
      <category term="kotlin" scheme="http://kotlin.xin/categories/kotlin/"/>
    
    
  </entry>
  
  <entry>
    <title>开发Android：基本语法</title>
    <link href="http://kotlin.xin/2017/05/25/%E5%BC%80%E5%8F%91Android%EF%BC%9A%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <id>http://kotlin.xin/2017/05/25/开发Android：基本语法/</id>
    <published>2017-05-24T16:27:15.000Z</published>
    <updated>2017-05-24T16:27:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>##变量<br>1.常量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">val text:String = &quot;hell world!&quot;;</div></pre></td></tr></table></figure></p>
<p>2.变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var view:View   = LayoutInflater.from(this).inflate(R.layout.dialog_kotlin,null, false);</div></pre></td></tr></table></figure></p>
<p>3.可为空的变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var message:String? = &quot;this is a dialog message!&quot;;</div></pre></td></tr></table></figure></p>
<p>4.可以不指定类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var name: String? = null;</div><div class="line">var testName = &quot;test&quot;</div></pre></td></tr></table></figure></p>
<p>5.静态变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">companion object &#123;</div><div class="line">    var sText = &quot;companion text&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>##函数<br>1.定义函数(或方法)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fun onClickTest(view: View) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.定义带返回值的函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fun onClickTest(view: View) :String &#123;</div><div class="line">    return &quot;&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.定义返回值可为空的函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fun onClickTest(view: View) :String? &#123;</div><div class="line">    return null;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>##类<br>Kotlin类文件名为*.kt，一个类可以有（0或1）个主构造函数或多个次构造函数</p>
<p>#####主构造函数：<br>i.可以将主构造函数中参数申明成类中成员变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">open class Animal(var nameStr: String) &#123;</div><div class="line">        open fun test()&#123;</div><div class="line">            val testName = nameStr;</div><div class="line">        &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>ii.可以不作为成员变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">open class Food(name: String)&#123;</div><div class="line">        lateinit var mName:String;</div><div class="line">        init &#123;</div><div class="line">            mName = name;</div><div class="line">        &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>#####次构造函数：<br>i.不能将次构造函数中参数申明成成员变量<br>如 以下是错误的</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2858322-9124150cdb687d88.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-04 下午2.48.04.png"><br>ii.如果有主构造函数，次构造函数必须要实现主构造函数，对象构造后会调用init 代码块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">open class Food(name: String)&#123;</div><div class="line">        lateinit var mName:String;</div><div class="line">        init &#123;</div><div class="line">            mName = name;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        constructor(nameStr: String, weight: Int) : this(nameStr) &#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>iii.子类的要实现父类的主构造函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">open class Animal(var nameStr: String) &#123;</div><div class="line">     open fun test()&#123;</div><div class="line">         val testName = nameStr;</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> class Duck : Animal(&quot;鸭子&quot;) &#123;</div><div class="line">     override fun toString(): String &#123;</div><div class="line">         return &quot;name:&quot;+nameStr;</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"> </div><div class="line"></div><div class="line"> class Dog(var name: String) : Animal(nameStr = name) &#123;</div><div class="line">     override fun test()&#123;</div><div class="line">         val testName = nameStr;</div><div class="line">         this.name =&quot;&quot;;</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> class Pig(name: String, weight: Int) : Animal(nameStr = name) &#123;</div><div class="line"></div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>##内部类<br>Kotlin中内部类都是静态的，如以下内部类Food无法调用外部成员变量parentVar<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">class KotlinActivity : AppCompatActivity() &#123;</div><div class="line">    var parentVar:String = &quot;parent var&quot;;</div><div class="line">    </div><div class="line">    open class Food(name: String)&#123;</div><div class="line">        lateinit var mName:String;</div><div class="line">        init &#123;</div><div class="line">            mName = name;</div><div class="line">            mName = parentVar;</div><div class="line">            mName = KotlinActivity().parentVar;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        constructor(nameStr: String, weight: Int) : this(nameStr) &#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>非静态内部类，需要用inner标示，如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">class GameActivity : Activity() &#123;</div><div class="line">    </div><div class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">        super.onCreate(savedInstanceState)</div><div class="line">        setContentView(R.layout.activity_game)</div><div class="line"></div><div class="line">        start.setOnClickListener &#123; gameView.start() &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fun onScoreChanged(scoreValue: Int) &#123;</div><div class="line">        score.text = scoreValue.toString()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    override fun onPause() &#123;</div><div class="line">        super.onPause()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    inner class Test&#123;</div><div class="line">        fun init()&#123;</div><div class="line">            var context = this@GameActivity.applicationContext;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>##接口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">package com.ifnoif.game2048</div><div class="line"></div><div class="line">import android.app.Activity</div><div class="line">import android.os.Bundle</div><div class="line">import kotlinx.android.synthetic.main.activity_game.*</div><div class="line">import java.io.File</div><div class="line">import java.io.FileFilter</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by shen on 17/4/11.</div><div class="line"> */</div><div class="line"></div><div class="line">class GameActivity : Activity() &#123;</div><div class="line"></div><div class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">        super.onCreate(savedInstanceState)</div><div class="line">        setContentView(R.layout.activity_game)</div><div class="line"></div><div class="line">        start.setOnClickListener &#123; gameView.start() &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fun onScoreChanged(scoreValue: Int) &#123;</div><div class="line">        score.text = scoreValue.toString()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    override fun onPause() &#123;</div><div class="line">        super.onPause()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    inner class Test&#123;</div><div class="line">        fun init()&#123;</div><div class="line">            var context = this@GameActivity.applicationContext;</div><div class="line"></div><div class="line">            var fileFilter: FileFilter = FileFilter &#123; pathname: File -&gt; var end = &quot;.java&quot;; pathname.absolutePath.endsWith(end) &#125;</div><div class="line"></div><div class="line">            //实现kotlin中的接口，不能整成上面那种匿名内部类的方式，需采用下面的方法</div><div class="line">            var operation: Operation = object:Operation &#123;</div><div class="line">                override fun add(a: Int, b: Int): Int &#123;</div><div class="line">                    return a+b</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            //kotlin中的抽象类也不能生成匿名内部类</div><div class="line">            var add: Operation = object:Add() &#123;</div><div class="line">                override fun add(a: Int, b: Int): Int &#123;</div><div class="line">                    return a+b</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //抽象类</div><div class="line">    abstract class Add(): Operation&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //定义接口interface</div><div class="line">    open interface Operation &#123;</div><div class="line">        fun add(a: Int, b: Int): Int;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>还可以使用typealias(声明函数类型别名)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">typealias Operate&lt;T&gt; = (a:T,b:T) -&gt; T</div><div class="line">fun init() &#123;</div><div class="line">    var operate: (Int, Int) -&gt; Int = &#123; a:Int, b:Int -&gt;a+b&#125;</div><div class="line">    operate.invoke(1,2)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;##变量&lt;br&gt;1.常量&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;
    
    </summary>
    
      <category term="kotlin" scheme="http://kotlin.xin/categories/kotlin/"/>
    
    
  </entry>
  
  <entry>
    <title>开发Android：环境搭建</title>
    <link href="http://kotlin.xin/2017/05/25/%E5%BC%80%E5%8F%91Android%EF%BC%9A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>http://kotlin.xin/2017/05/25/开发Android：环境搭建/</id>
    <published>2017-05-24T16:24:12.000Z</published>
    <updated>2017-05-24T16:26:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>##1.Android Studio安装Kotlin插件<br>Android studio－&gt;Preferences－&gt;Plugin－&gt;搜索Kotlin并安装<br>AndroidStudio3.0已经自带插件了，当新建一个工程时，勾选kotlin支持，会自动添加kotlin依赖。因此推荐大家使用AS3.0或更高版本</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2858322-da018e89a7bcd9c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-04 下午12.22.07.png"></p>
<p>##2.编写KotlinActivity测试<br>项目右键创建Class的地方会有KotlinActivity</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2858322-cf0c631e16abf617.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-04 下午12.26.59.png"></p>
<p>创建后代码如下，与正常开发Android一样，在AndroidManifest.xml中加入Activity申明，就可以运行了</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2858322-106cf6f3a3c368cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-04 下午12.29.05.png"></p>
<p>##3.Kotlin会自动配置Kotlin<br>工程module的build.gradle有以下改动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">buildscript &#123;</div><div class="line">    ext.kotlin_version = &apos;1.1.1&apos;</div><div class="line">    repositories &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">    dependencies &#123;</div><div class="line">        classpath &apos;com.android.tools.build:gradle:2.2.3&apos;</div><div class="line"></div><div class="line">        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;</div><div class="line"></div><div class="line">        // NOTE: Do not place your application dependencies here; they belong</div><div class="line">        // in the individual module build.gradle files</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>App module的build.gradle中主要有以下改动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">apply plugin: &apos;kotlin-android&apos;</div><div class="line">dependencies &#123;</div><div class="line">    compile &quot;org.jetbrains.kotlin:kotlin-stdlib-jre7:1.1.1&quot;//$kotlin_version</div><div class="line">&#125;</div><div class="line">repositories &#123;</div><div class="line">    mavenCentral()</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>开始开发kotlin之前，请先熟悉下一章：Kotlin基本语法</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;##1.Android Studio安装Kotlin插件&lt;br&gt;Android studio－&amp;gt;Preferences－&amp;gt;Plugin－&amp;gt;搜索Kotlin并安装&lt;br&gt;AndroidStudio3.0已经自带插件了，当新建一个工程时，勾选kotlin支持，
    
    </summary>
    
      <category term="kotlin" scheme="http://kotlin.xin/categories/kotlin/"/>
    
    
  </entry>
  
  <entry>
    <title>是时候学习Kotlin了</title>
    <link href="http://kotlin.xin/2017/05/19/%E6%98%AF%E6%97%B6%E5%80%99%E5%AD%A6%E4%B9%A0Kotlin%E4%BA%86/"/>
    <id>http://kotlin.xin/2017/05/19/是时候学习Kotlin了/</id>
    <published>2017-05-19T12:31:12.000Z</published>
    <updated>2017-05-19T16:19:14.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>Kotlin火了，真的，以前我们搞kotlin只是野路子，商用项目中不提倡使用Kotlin，因为没有多少人愿意去了解，而我也只是在项目的测试模块中用用，解解渴，探探路。现在谷歌已经力挺Kotlin了，Kotlin成为Android开发语言的第一选择，相信你也迫不及待想要了解Kotlin了，接下来我们开始Kotlin 从入门到放弃之旅吧。</p>
<h4 id="Kotlin是啥"><a href="#Kotlin是啥" class="headerlink" title="Kotlin是啥"></a>Kotlin是啥</h4><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>Kotlin是一种基于JVM的编程语言，和Java一样都是静态类型语言，由大名顶顶的JetBrains开发（JetBrains是Intellij idea的开发商，AndroidStudio也是他们和谷歌一起打造的）。</p>
<p>Kotlin 100%兼容Java，java开发的一些轮子，使用Kotlin开发的时候仍然能使用。没有使用Kotlin特性的功能，java也能无缝调用，这是Kotlin最大的一个优势。</p>
<h4 id="Kotlin-其他特性："><a href="#Kotlin-其他特性：" class="headerlink" title="Kotlin 其他特性："></a>Kotlin 其他特性：</h4><p>支持lambda，jdk1.8也可以支持了，Android开发使用1.8编译也能使用此功能，因此不加分</p>
<p>空安全：我们遇到的最频繁的坑，可能就是NPE了，而Kotlin能便捷的替我们避免NPE</p>
<p>扩展方法：可以为已有的类添加新的方法, 比继承更加简洁和优雅</p>
<p>数据类：POJO类，自动生成setter，getter，equals， hashCode。可以少写很多代码</p>
<p>扩展接口：类似jdk1.8中default方法，但是Android还不支持使用jdk中这个特性</p>
<p>Kotlin不是专门用来开发Android的，但是目前有很多Android项目 和 web服务端项目开始用Kotlin开发。同时kotlin能编译成javascript，因此也可以做网页开发</p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://kotlinlang.org/" target="_blank" rel="external">Kotlin 官网</a></p>
<p><a href="https://github.com/huanglizhuo/kotlin-in-chinese?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">Kotlin中文文档</a></p>
<p><a href="http://www.infoq.com/cn/news/2015/06/Android-JVM-JetBrains-Kotlin" target="_blank" rel="external">Kotlin：Android世界的Swift</a></p>
<p><a href="https://www.zhihu.com/question/25289041" target="_blank" rel="external">如何评价 Kotlin 语言</a></p>
<p><a href="http://blog.csdn.net/mrseasons/article/details/47144519" target="_blank" rel="external">Kotlin与java交互</a></p>
<p><a href="http://www.indiepig.com/blog/kotlin-hello-js.php" target="_blank" rel="external">Kotlin与JavaScript</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h3&gt;&lt;p&gt;Kotlin火了，真的，以前我们搞kotlin只是野路子，商用项目中不提倡使用Kotlin，因为没有多少人愿意去了解，而我也只是在项目的测试
    
    </summary>
    
      <category term="kotlin" scheme="http://kotlin.xin/categories/kotlin/"/>
    
    
  </entry>
  
  <entry>
    <title>夏天来le</title>
    <link href="http://kotlin.xin/2017/05/19/%E5%A4%8F%E5%A4%A9%E6%9D%A5le/"/>
    <id>http://kotlin.xin/2017/05/19/夏天来le/</id>
    <published>2017-05-19T07:25:12.000Z</published>
    <updated>2017-05-24T16:32:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>天气越来越热了，连续几天35℃，尽管如此，我还是很喜欢北京的，比较少下雨，什么都方便，而我所从事的互联网行业，在北京也是如火如荼。</p>
<p><img src="/2017/05/19/夏天来le/img1.jpg" alt="遛弯"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;天气越来越热了，连续几天35℃，尽管如此，我还是很喜欢北京的，比较少下雨，什么都方便，而我所从事的互联网行业，在北京也是如火如荼。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2017/05/19/夏天来le/img1.jpg&quot; alt=&quot;遛弯&quot;&gt;&lt;/p&gt;

    
    </summary>
    
      <category term="杂" scheme="http://kotlin.xin/categories/%E6%9D%82/"/>
    
    
  </entry>
  
</feed>
